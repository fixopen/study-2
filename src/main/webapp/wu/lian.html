<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script src="../util.js"></script>
    <script src="../jquery/jquery.min.js"></script>
</head>
<body>

<table id="show_list"></table>
<script type="text/javascript">
 /*   let subjects = []
    let currentSubjectIndex = 0
    let currentSubject
    let currentGradeIndex = 0
    let currentGrade = 20
    let currentVolumeIndex = 0
    let currentVolume
    let currentKnowledgePointIndex = 0
    let currentKnowledgePoint

    $(function () {
        var problemIdDD
        $.ajax({
            type: "get",
            url: "/api/subjects",
            dataType: "json",
            async: false,
            success: function (subjectData) {
                subjects = subjectData;
                let subjectSelect = document.getElementById('subject')
                for (var i = 0; i < subjectData.length; ++i) {
                    subjects[i].low = []
                    subjects[i].high = []
                    let filter = {
                        subjectId: subjects[i].id,
                        grade: 20
                    };
                    $.ajax({
                        type: "get",
                        url: '/api/volumes?filter=' + JSON.stringify(filter),
                        async: false,
                        success: function (volumes) {
                            subjects[i].low = volumes
                            for (var j = 0; j < subjects[i].low.length; ++j) {
                                subjects[i].low[j].vsid = []
                                let filter = {
                                    subjectId: subjects[i].id,
                                    volumeId: subjects[i].low[j].id,
                                    grade: 20
                                };

                                $.ajax({
                                    type: "get",
                                    url: '/api/knowledge-points?filter=' + JSON.stringify(filter),
                                    dataType: 'json',
                                    async: false,
                                    success: function (knowledgePoint) {
                                        subjects[i].low[j].vsid = knowledgePoint
                                    }
                                })
                            }
                        }
                    });
                    filter.grade = 21;
                    $.ajax({
                        type: "get",
                        url: '/api/volumes?filter=' + JSON.stringify(filter),
                        async: false,
                        success: function (volumes) {
                            subjects[i].high = volumes
                            for (var j = 0; j < subjects[i].high.length; ++j) {
                                subjects[i].high[j].vsid = []
                                let filter = {
                                    subjectId: subjects[i].id,
                                    volumeId: subjects[i].high[j].id,
                                    grade: 21
                                };

                                $.ajax({
                                    type: "get",
                                    url: '/api/knowledge-points?filter=' + JSON.stringify(filter),
                                    dataType: 'json',
                                    async: false,
                                    success: function (knowledgePoint) {
                                        subjects[i].high[j].vsid = knowledgePoint
                                    }
                                })
                            }
                        }
                    })

                    let option = document.createElement('option')
                    option.setAttribute("value", subjects[i].id)
                    option.appendChild(document.createTextNode(subjects[i].name))
                    subjectSelect.appendChild(option)
                }

                currentSubjectIndex = 0
                subjectSelect.selectedIndex = currentSubjectIndex
                currentSubject = subjectSelect.value

                let gradeSelect = document.getElementById('grade')
                currentGradeIndex = 0
                gradeSelect.selectedIndex = currentGradeIndex
                currentGrade = gradeSelect.value

                let volumeSelect = document.getElementById('volumeTitleChoice')
                volumeSelect.innerHTML = ''
                let gradeName = 'low'
                switch (currentGrade) {
                    case 21:
                    case '21':
                        gradeName = 'high'
                        break
                    default:
                        break
                }
                for (let j = 0; j < subjects[currentSubjectIndex][gradeName].length; ++j) {
                    let option = document.createElement('option')
                    option.setAttribute("value", subjects[currentSubjectIndex][gradeName][j].id)
                    option.appendChild(document.createTextNode(subjects[currentSubjectIndex][gradeName][j].title))
                    volumeSelect.appendChild(option)
                }

                currentVolumeIndex = 0
                volumeSelect.selectedIndex = currentVolumeIndex
                currentVolume = volumeSelect.value

                let opt = volumeSelect.options.item(currentVolumeIndex)
                let volume = document.getElementById('volumeTitle')
                volume.value = opt.text

                let knowledgePointSelect = document.getElementById('knowledgePointTitleChoice')
                knowledgePointSelect.innerHTML = ''
                for (let j = 0; j < subjects[currentSubjectIndex][gradeName][currentVolumeIndex].vsid.length; ++j) {
                    let option = document.createElement('option')
                    option.setAttribute("value", subjects[currentSubjectIndex][gradeName][currentVolumeIndex].vsid[j].id)
                    option.appendChild(document.createTextNode(subjects[currentSubjectIndex][gradeName][currentVolumeIndex].vsid[j].title))
                    knowledgePointSelect.appendChild(option)
                }
                currentKnowledgePointIndex = 0
                knowledgePointSelect.selectedIndex = currentKnowledgePointIndex
                currentKnowledgePoint = knowledgePointSelect.value

                let knowledgePoint = document.getElementById('knowledgePointTitle')
                knowledgePoint.value = ''
                opt = knowledgePointSelect.options.item(currentKnowledgePointIndex)
                if (opt) {
                    knowledgePoint.value = opt.text
                }
            }

        });

        $('#subject').on('change', function (e) {
            currentSubjectIndex = e.target.selectedIndex
            currentSubject = e.target.value

            let gradeSelect = document.getElementById('grade')
            currentGradeIndex = 0
            gradeSelect.selectedIndex = currentGradeIndex
            currentGrade = gradeSelect.value

            let volumeSelect = document.getElementById('volumeTitleChoice')
            volumeSelect.innerHTML = ''
            let gradeName = 'low'
            switch (currentGrade) {
                case 21:
                case '21':
                    gradeName = 'high'
                    break
                default:
                    break
            }
            for (let i = 0; i < subjects[currentSubjectIndex][gradeName].length; ++i) {
                let option = document.createElement('option')
                option.setAttribute("value", subjects[currentSubjectIndex][gradeName][i].id)
                option.appendChild(document.createTextNode(subjects[currentSubjectIndex][gradeName][i].title))
                volumeSelect.appendChild(option)
            }

            currentVolumeIndex = 0
            volumeSelect.selectedIndex = currentVolumeIndex
            currentVolume = volumeSelect.value

            let volume = document.getElementById('volumeTitle')
            volume.value = ''
            let opt = volumeSelect.options.item(currentVolumeIndex)
            if (opt) {
                volume.value = opt.text
            }

            let knowledgePointSelect = document.getElementById('knowledgePointTitleChoice')
            knowledgePointSelect.innerHTML = ''
            for (let j = 0; j < subjects[currentSubjectIndex][gradeName][currentVolumeIndex].vsid.length; ++j) {
                let option = document.createElement('option')
                option.setAttribute("value", subjects[currentSubjectIndex][gradeName][currentVolumeIndex].vsid[j].id)
                option.appendChild(document.createTextNode(subjects[currentSubjectIndex][gradeName][currentVolumeIndex].vsid[j].title))
                knowledgePointSelect.appendChild(option)
            }
            currentKnowledgePointIndex = 0
            knowledgePointSelect.selectedIndex = currentKnowledgePointIndex
            currentKnowledgePoint = knowledgePointSelect.value

            let knowledgePoint = document.getElementById('knowledgePointTitle')
            knowledgePoint.value = ''
            opt = knowledgePointSelect.options.item(currentKnowledgePointIndex)
            if (opt) {
                knowledgePoint.value = opt.text
            }
        })

        $('#grade').on('change', function (e) {
            currentGradeIndex = e.target.selectedIndex
            currentGrade = e.target.value

            let volumeSelect = document.getElementById('volumeTitleChoice')
            volumeSelect.innerHTML = ''

            let gradeName = 'low'
            switch (currentGrade) {
                case 21:
                case '21':
                    gradeName = 'high'
                    break
                default:
                    break
            }

            for (let i = 0; i < subjects[currentSubjectIndex][gradeName].length; ++i) {
                let option = document.createElement('option')
                option.setAttribute("value", subjects[currentSubjectIndex][gradeName][i].id)
                option.appendChild(document.createTextNode(subjects[currentSubjectIndex][gradeName][i].title))
                volumeSelect.appendChild(option)
            }

            currentVolumeIndex = 0
            volumeSelect.selectedIndex = currentVolumeIndex
            currentVolume = volumeSelect.value

            let volume = document.getElementById('volumeTitle')
            volume.value = ''
            let opt = volumeSelect.options.item(currentVolumeIndex)
            if (opt) {
                volume.value = opt.text
            }

            let knowledgePointSelect = document.getElementById('knowledgePointTitleChoice')
            knowledgePointSelect.innerHTML = ''
            for (let j = 0; j < subjects[currentSubjectIndex][gradeName][currentVolumeIndex].vsid.length; ++j) {
                let option = document.createElement('option')
                option.setAttribute("value", subjects[currentSubjectIndex][gradeName][currentVolumeIndex].vsid[j].id)
                option.appendChild(document.createTextNode(subjects[currentSubjectIndex][gradeName][currentVolumeIndex].vsid[j].title))
                knowledgePointSelect.appendChild(option)
            }
            currentKnowledgePointIndex = 0
            knowledgePointSelect.selectedIndex = currentKnowledgePointIndex
            currentKnowledgePoint = knowledgePointSelect.value

            let knowledgePoint = document.getElementById('knowledgePointTitle')
            knowledgePoint.value = ''
            opt = knowledgePointSelect.options.item(currentKnowledgePointIndex)
            if (opt) {
                knowledgePoint.value = opt.text
            }

        })

        $('#volumeTitleChoice').on('change', function (e) {
            let volumeSelect = e.target
            currentVolumeIndex = volumeSelect.selectedIndex
            currentVolume = volumeSelect.value

            let volume = document.getElementById('volumeTitle')
            volume.value = ''
            let opt = volumeSelect.options.item(currentVolumeIndex)
            if (opt) {
                volume.value = opt.text
            }

            let gradeName = 'low'
            switch (currentGrade) {
                case 21:
                case '21':
                    gradeName = 'high'
                    break
                default:
                    break
            }

            let knowledgePointSelect = document.getElementById('knowledgePointTitleChoice')
            knowledgePointSelect.innerHTML = ''
            for (let j = 0; j < subjects[currentSubjectIndex][gradeName][currentVolumeIndex].vsid.length; ++j) {
                let option = document.createElement('option')
                option.setAttribute("value", subjects[currentSubjectIndex][gradeName][currentVolumeIndex].vsid[j].id)
                option.appendChild(document.createTextNode(subjects[currentSubjectIndex][gradeName][currentVolumeIndex].vsid[j].title))
                knowledgePointSelect.appendChild(option)
            }
            currentKnowledgePointIndex = 0
            knowledgePointSelect.selectedIndex = currentKnowledgePointIndex
            currentKnowledgePoint = knowledgePointSelect.value

            let knowledgePoint = document.getElementById('knowledgePointTitle')
            knowledgePoint.value = ''
            opt = knowledgePointSelect.options.item(currentKnowledgePointIndex)
            if (opt) {
                knowledgePoint.value = opt.text
            }

        })

        $('#knowledgePointTitleChoice').on('change', function (e) {
            currentKnowledgePointIndex = e.target.selectedIndex
            currentKnowledgePoint = e.target.value

            let knowledgePoint = document.getElementById('knowledgePointTitle')
            knowledgePoint.value = ''
            opt = e.target.options.item(currentKnowledgePointIndex)
            if (opt) {
                knowledgePoint.value = opt.text
            }
            /!*document.getElementById("buttons").style.visibility = "hidden";//隐藏*!/
            contents.innerHTML = ''
        })

    })*/
 let k = {
     subjectId:1,
 }
 let k = {
     subjectId:1,
 }
 $.ajax({
     type: "get",
     url: "/api/schedulers?filter="+ JSON.stringify(k),
     dataType: "json",
     success: function (obj) {
         var list = obj;
         $("#show_list").empty();
         //$("#show_list").append("<tr><th colspan='10'>排课列表</th></tr>");
         $("#show_list").append("<select id='ke'>科目</select><select id='nian'>年级</select><select id='tea'>老师</select>");
         for (var i = 0; i < list.length; ++i) {
             for (var j = 0; j < list[i].length; ++j) {
                 if(list[i][j].subjectId == 1){
                     list[i][j].subjectId = "语文"
                 }
                 if(list[i][j].subjectId == 2){
                     list[i][j].subjectId = "数学"
                 }
                 if(list[i][j].subjectId== 3){
                     list[i][j].subjectId = "英语"
                 }
                 if(list[i][j].grade == 20){
                     list[i][j].grade= "1-3"
                 }
                 if(list[i][j].grade == 21){
                     list[i][j].grade = "4-6"
                 }
                 if(list[i][j].grade == 1){
                     list[i][j].grade = "一年级"
                 }
                 if(list[i][j].grade == 2){
                     list[i][j].grade = "二年级"
                 }
                 if(list[i][j].grade == 3){
                     list[i][j].grade = "三年级"
                 }
                 if(list[i][j].grade == 4){
                     list[i][j].grade = "四年级"
                 }
                 if(list[i][j].grade == 5){
                     list[i][j].grade = "五年级"
                 }
                 if(list[i][j].grade == 6){
                     list[i][j].grade = "六年级"
                 }
                 //alert()
                 /*var ke = document.getElementById("ke")
                 var nian = document.getElementById("nian")
                 var tea = document.getElementById("tea")
                 //ke.appendChild()
                 $('#ke').append("<option value="+list[i][j].subjectId+">"+list[i][j].subjectId+"</option>")
                 $('#nian').append("<option value="+list[i][j].grade+">"+list[i][j].grade+"</option>")
                 $('#tea').append("<option value="+list[i][j].teacher+">"+list[i][j].teacher+"</option>")*/
                 //$("#show_list").append("  ke.appendChild()<option>" + list[i][j].subjectId + "</option><option>" + list[i][j].grade + "</option><option>" + list[i][j].teacher + "</option>");
             }
         }
     }
 });

</script>
</body>
</html>
