<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>直播视频</title>
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0,user-scalable=no"
          id="viewport"/>
    <meta name="format-detection" content="telephone=no"/>
    <meta name="screen-orientation" content="portrait"/>

    <link rel="stylesheet" href="/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="/css/global.css">
    <link rel="stylesheet" href="/css/common.css">
    <!--<link rel="stylesheet" href="allVideo0.css">-->
    <link rel="stylesheet" href="videos.css">
    <style>
        .convenient {
            position: absolute;
            top: 2.7%;
            left: 50%;
            -webkit-transform: translateX(-50%);
            -ms-transform: translateX(-50%);
            -o-transform: translateX(-50%);
            transform: translateX(-50%);
            display: block;
            width: 92%;
            background: url('../img/schedule.png') no-repeat center top;
            -webkit-background-size: 100% 100%;
            background-size: 100% 100%;
            padding: 10.5% 4.3% 4.5%;
            box-sizing: border-box;
            overflow: hidden;
            text-align: center;
        }

        .week {
            position: absolute;
            top: 3%;
            left: 28.3%;
            font-size: 1rem;
            color: #000;
            font-family: "Microsoft YaHei", serif;
        }

        .schedule-table {
            width: 100%;
            height: 100%;
        }

        .schedule-table thead {
            height: 1.8125rem;
        }

        .schedule-table tr {
            height: 1.25rem;
        }

        .th {
            width: 5.0rem;
            height: 1.8125rem;
            background: url(../img/week_date.png) no-repeat center;
            -webkit-background-size: contain;
            background-size: contain;
            border-left: none;
            border-right: 1px solid #ea875f;
        }

        .color:nth-child(odd) {
            background-color: #ffd5ce;
            border-bottom: 0.0625rem solid #ea875f;
        }

        .color:nth-child(even) {
            background-color: #fff;
            border-bottom: 0.09375rem solid #ea875f;
        }

        .schedule-table td {
            font-size: 0.6875rem;
            color: #371f1f;
            text-align: center;
        }

        .data :nth-child(even) {
            border-top: 1px solid #ea875f;
        }

        .pika-single {
            position: absolute !important;
        }

        .pika-lendar {
            text-align: center;
        }

        .pika-lendar table {
            width: 100%;
            margin: 10px 0;
        }

        .pika-lendar th {
            text-align: center;
        }

        .pika-lendar td {
            text-align: center;
            font-size: 1rem;
        }

        .pika-button {
            color: #aaa;
            background-color: #fff;
            padding: 10px 16px;
        }
    </style>

</head>

<body>
<article id="main">
    <div class="wrap">
        <div class="rain-main  noPadd">
            <div class="kebiao_tou" id="schedulerEntry" data-article="scheduler">
                <div class="tou_left">
                    <span class="left_kebiao" data-article="scheduler">本周课程表</span>
                    <br>
                    <span data-article="scheduler">Ben Zhou Ke Cheng Biao</span>
                </div>
                <div class="tou_right" data-article="scheduler"></div>
            </div>
            <!-- Nav tabs -->
            <div class="tab_div">
                <ul role="tablist" class="tab_switch  nav nav-tabs">
                    <li class="tab_swli  " role="presentation" id="chineseZero">
                        <a class="tab_toggle" href="#zero" role="tab" data-toggle="tab">语文
                            <span class="tab_swlispan">(<i id="Cc"></i>)</span>
                        </a>
                    </li>
                    <li role="presentation" class="tab_swli tab_swlino" id="mathOne">
                        <a class="tab_toggle" href="#one" role="tab" data-toggle="tab">数学
                            <span class="tab_swlispan">(<i id="Mc"></i>)</span>
                        </a>
                    </li>
                </ul>
            </div>

            <!-- Tab panes -->
            <div role="tabpanel" class="nei_rong tab-pane" id="zero">
                <div class="tab-zhibo">
                    <div id="zeroPlaying"></div>
                    <div id="zeroFuture"></div>
                </div>
            </div>
            <div role="tabpanel" class="nei_rong tab-pane" id="one">
                <div class="tab-zhibo">
                    <div id="onePlaying"></div>
                    <div id="oneFuture"></div>
                </div>
            </div>

            <div class="before_video">
                <div class="bevid_btn" id="passedEntry" data-article="passed">往期回放</div>
                <div class="pullUp">
                    <span class="pullUpIcon"></span>
                    <span class="pullUpLabel">除了直播，还有精彩回放等着您哦！</span>
                    <span class="pullUpLabel" style="display: none;">没有更多了，看看往期回放吧！</span>
                </div>
            </div>
        </div>
    </div>
</article>
<article id="passed" style="display: none;" class="noBackg">
    <div class="tan"></div>
    <div class="wrap">
        <div class="tiao_jian">
            <div class="tiaoj_TJ">
                <div class="tiaoj_span">
                    <span class="filter_item">科目</span>
                </div>
                <ul class="xiala_ul">
                    <li class="xiala_li cur" data-type="subject">全部<img src="../images/zbwq_zhong.png" alt=""></li>
                    <li class="xiala_li" data-type="subject">语文<img src="../images/zbwq_zhong.png" alt=""></li>
                    <li class="xiala_li" data-type="subject">数学<img src="../images/zbwq_zhong.png" alt=""></li>
                </ul>
            </div>
            <div class="tiaoj_TJ">
                <div class="tiaoj_span" id="teacherSelect">
                    <span class="filter_item">老师</span>
                </div>
                <ul class="xiala_ul">
                    <li class="xiala_li cur" data-type="teacher">全部<img src="../images/zbwq_zhong.png" alt=""></li>
                    <ul id="teacher" class="xiala_liUl"></ul>
                </ul>
            </div>
            <div class="tiaoj_TJ" id="gradeeSelect">
                <div class="tiaoj_span">
                    <span class="filter_item">年级</span>
                </div>
                <ul class="xiala_ul">
                    <li class="xiala_li cur" data-type="grade">全部<img src="../images/zbwq_zhong.png" alt=""></li>
                    <ul id="grade" class="xiala_liUl"></ul>
                </ul>
            </div>
            <!--<div class="tiaoj_TJ" id="dateSelect">-->
            <!--<div class="tiaoj_span" id="datePicker">-->
            <!--<span class="filter_item">日期</span>-->
            <!--</div>-->
            <!--<div class="xiala_ul" id="date"></div>-->
            <!--</div>-->
        </div>
        <ul id="xuanzhong-entries" class="tiaoj_jieG"></ul>
        <div class="rain-main video-passed-textTop">
            <ul id="video"></ul>
            <div class="bottom_txt">
                <span class="leftLine">————</span>没有更多视频咯！<span class="leftLine">————</span>
            </div>
        </div>
    </div>
</article>
<article id="videoDetail" style="display: none;">
    <div class="wrap">
        <div class="rain-main live-details">
            <div id="live-details-video" class="live-details-video"></div>
            <div class="liveDetails-comment">
                <div class="liveDetails-center">
                    <h3 class="liveDetails-h3">评论</h3>
                    <ul id="comment-area" class="liveDetails-ul"></ul>
                </div>
            </div>
            <div class="liveDetails-message">
                <input class="liveDetails-messageTxt" type="text" placeholder="留言" id="textarea">
                <button class="liveDetails-messageBtn" id="btn">发送</button>
            </div>
        </div>
    </div>
</article>
<article id="scheduler" style="display: none;" class="wrap">
    <div class="convenient">
        <div class="week">
            第<span id="week"></span>周
        </div>
        <table class="schedule-table">
            <thead>
            <tr style="background-color: #fff; border-bottom: 1px solid #ea875f;">
                <th style="width: 20%;" class="th"></th>
                <th style="width: 80%; font-size: smaller">
                    <table style="width: 100%; height: 100%;  border-spacing: 0; border-collapse: collapse;">
                        <tr style="width: 100%; height: 100%;">
                            <th style="width: 28%; height: 100%;text-align: center;">时间</th>
                            <th style="width: 22%; height: 100%; border-left: 1px solid #ea875f; border-right: 1px solid #ea875f;text-align: center;">
                                授课年级
                            </th>
                            <th style="width: 50%; height: 100%;text-align: center;">授课内容</th>
                        </tr>
                    </table>
                </th>
            </tr>
            </thead>
            <tbody id="day"></tbody>
        </table>
    </div>
</article>
<article id="futureNote" style="display: none;" class="futureWrap">
    <div class="waiting">
        <img src="../img/backG.png" alt="">
        <p class="waitTime"></p>
        <span class="goBack" data-article="main"></span>
    </div>
</article>


<!--********************************main***********************-->
<template id="chinese-playing-template">
    <div class="all_uli">
        <div class="all_liplay b" data-id="${id}">
            <a class="all_aBtn" href="javascript:void(0)">
                <span class="bofang"></span>
                <div class="yuwen_div0"><span>${price}</span>金豆</div>
                <div class="yuwen_div2">
                    <h3 class="yuwen_h3">${abstraction}</h3>
                    <p class="yuwen_p">${name}</p>
                </div>
                <p class="yuwen_p2">
                    <span>${grade}</span>
                    <span class="yuwen_span">${teacher}</span>
                    <span class="yuwen_riqi">${year}-${month}-${date} ${hour}:${minute}</span>
                </p>
                <a class="yuwen_a" href="javascript:void(0)"></a>
            </a>
        </div>
        <div class="course-intro">
            <div class="course_xiaqing">
                <div class="xiaq_div">
                    <p>${outline}</p>
                    <div class="course_detail detail" data-detail="${id}">详情
                        <img src="../images/xiala.png" alt="">
                        <img src="../images/xiala_sq.png" alt="">
                    </div>
                </div>
            </div>
            <div class="course-detail" data-identity="${id}">
                <div class="keqian_zb">
                    课前准备：
                    <span>${prepare}</span>
                </div>
                <h3 class="sml-tit brief1">
                    <img src="../images/abc.png" alt="">
                    课程简介
                </h3>
                <p class="tim2">${description}</p>

                <h3 class="sml-tit brief2">
                    <img src="../images/zjr_btn.png" alt="">
                    主讲人简介
                </h3>
                <p class="tim2">${teacherDescription}</p>

                <h3 class="sml-tit brief3">
                    <img src="../images/sxsj_btn.png" alt="">
                    上线时间
                </h3>
                <p>${year}-${month}-${date}</p>
            </div>
        </div>
    </div>
</template>
<template id="chinese-future-template">
    <div class="all_uli">
        <div class="all_liplay a">
            <div class="futureNoteEntry" class="all_aBtn">
                <span class="daibo_ceng ceng_yuwen" data-article="futureNote" data-id="${id}"></span>
                <span class="bofang daibo"></span>
                <span class="bofang_time">${year}-${month}-${date} ${hour}:${minute}开讲</span>
                <div class="yuwen_div0"><span>${price}</span>金豆</div>
                <div class="yuwen_div2">
                    <h3 class="yuwen_h3">${abstraction}</h3>
                    <p class="yuwen_p">${name}</p>
                </div>
                <p class="yuwen_p2">
                    <span>${grade}</span>
                    <span class="yuwen_span">${teacher}</span>
                    <span class="yuwen_riqi">${year}-${month}-${date}</span>
                </p>
                <a class="yuwen_a" href="#"></a>
            </div>
        </div>
        <div class="course-intro">
            <div class="course_xiaqing">
                <div class="xiaq_div">
                    <p>${outline}</p>
                    <div class="course_detail detail" data-detail="${id}">详情
                        <img src="../images/xiala.png" alt="">
                        <img src="/images/xiala_sq.png" alt="">
                    </div>
                </div>
            </div>
            <div class="course-detail" data-identity="${id}">
                <div class="keqian_zb">
                    课前准备：
                    <span>${prepare}</span>
                </div>
                <h3 class="sml-tit brief1">
                    <img src="/images/abc.png" alt="">
                    课程简介
                </h3>
                <p class="tim2">${description}</p>

                <h3 class="sml-tit brief2">
                    <img src="/images/zjr_btn.png" alt="">
                    主讲人简介
                </h3>
                <p class="tim2">${teacherDescription}</p>

                <h3 class="sml-tit brief3">
                    <img src="/images/sxsj_btn.png" alt="">
                    上线时间
                </h3>
                <p>${year}-${month}-${date} ${hour}:${minute}</p>
            </div>
        </div>
    </div>
</template>
<template id="math-playing-template">
    <div class="all_uli">
        <div class="all_liplay b shuxue_play" data-id="${id}">
            <a class="all_aBtn" href="javascript:void(0)">
                <span class="bofang"></span>
                <div class="yuwen_div0"><span>${price}</span>金豆</div>
                <div class="yuwen_div2 shuxue_div2">
                    <h3 class="yuwen_h3">${abstraction}</h3>
                    <p class="yuwen_p">${name}</p>
                </div>
                <p class="yuwen_p2">
                    <span>${grade}</span>
                    <span class="yuwen_span">${teacher}</span>
                    <span class="yuwen_riqi">${year}-${month}-${date} ${hour}:${minute}</span>
                </p>
                <a class="yuwen_a" href="javascript:void(0)"></a>
            </a>
        </div>
        <div class="course-intro">
            <div class="course_xiaqing">
                <div class="xiaq_div">
                    <p>${outline}</p>
                    <div class="course_detail shuxue_Btn detail" data-detail="${id}">详情
                        <img src="/images/xiala_sx.png" alt="">
                        <img src="/images/xiala_sqsx.png" alt="">
                    </div>
                </div>
            </div>
            <div class="course-detail" data-identity="${id}">
                <div class="keqian_zb">
                    课前准备：
                    <span>${prepare}</span>
                </div>
                <h3 class="sml-tit brief1">
                    <img src="/images/abc.png" alt="">
                    课程简介
                </h3>
                <p class="tim2">${description}</p>

                <h3 class="sml-tit brief2">
                    <img src="/images/zjr_btn.png" alt="">
                    主讲人简介
                </h3>
                <p class="tim2">${teacherDescription}</p>

                <h3 class="sml-tit brief3">
                    <img src="/images/sxsj_btn.png" alt="">
                    上线时间
                </h3>
                <p>${year}-${month}-${date} ${hour}:${minute}</p>
            </div>
        </div>
    </div>
</template>
<template id="math-future-template">
    <div class="all_uli">
        <div class="all_liplay shuxue_play">
            <div class="futureNoteEntry" class="all_aBtn">
                <span class="daibo_ceng" data-article="futureNote" data-id="${id}"></span>
                <span class="bofang daibo"></span>
                <span class="bofang_time">${year}-${month}-${date} ${hour}:${minute}开讲</span>
                <div class="yuwen_div0"><span>${price}</span>金豆</div>
                <div class="yuwen_div2 shuxue_div2">
                    <h3 class="yuwen_h3">${abstraction}</h3>
                    <p class="yuwen_p">${name}</p>
                </div>
                <p class="yuwen_p2">
                    <span>${grade}</span>
                    <span class="yuwen_span">${teacher}</span>
                    <span class="yuwen_riqi">${year}-${month}-${date}</span>
                </p>
                <a class="yuwen_a" href="#"></a>
            </div>
        </div>
        <div class="course-intro">
            <div class="course_xiaqing">
                <div class="xiaq_div">
                    <p>${outline}</p>
                    <div class="course_detail shuxue_Btn detail" data-detail="${id}">详情
                        <img src="/images/xiala_sx.png" alt="">
                        <img src="/images/xiala_sqsx.png" alt="">
                    </div>
                </div>
            </div>
            <div class="course-detail" data-identity="${id}">

                <div class="keqian_zb">
                    课前准备：
                    <span>${prepare}</span>
                </div>
                <h3 class="sml-tit brief1">
                    <img src="/images/abc.png" alt="">
                    课程简介
                </h3>
                <p class="tim2">${description}</p>

                <h3 class="sml-tit brief2">
                    <img src="/images/zjr_btn.png" alt="">
                    主讲人简介
                </h3>
                <p class="tim2">${teacherDescription}</p>

                <h3 class="sml-tit brief3">
                    <img src="/images/sxsj_btn.png" alt="">
                    上线时间
                </h3>
                <p>${year}-${month}-${date} ${hour}:${minute}</p>
            </div>
        </div>
    </div>
</template>
<!--***********************************passed*****************************************-->
<template id="chinese-template">
    <li class="all_uli">
        <div class="all_liplay">
            <div class="a all_aBtn" data-id="${id}">
                <!--data-article="videoDetail"-->
                <div class="leftJinDou"><span>${price}</span>金豆</div>
                <div class="yuwen_div1">语文</div>
                <div class="yuwen_div2">
                    <h3 class="yuwen_h3">${abstraction}</h3>
                    <p class="yuwen_p">${name}</p>
                </div>
                <p class="yuwen_p2">
                    <span>${grade}</span>
                    <span class="yuwen_span">${teacher}</span>
                    <span class="yuwen_riqi">${year}-${month}-${date}</span>
                </p>
                <span class="yuwen_a"></span>
            </div>
        </div>
        <div class="course-intro">
            <div class="course_xiaqing">
                <div class="xiaq_div">
                    <p>${outline}</p>
                    <div class="course_detail passed-detail" data-detail="${id}">详情
                        <img src="/images/xiala.png" alt="">
                        <img src="/images/xiala_sq.png" alt="">
                    </div>
                </div>
            </div>
            <div class="course-detail" data-identity="${id}">
                <div class="keqian_zb">
                    课前准备：
                    <span>${prepare}</span>
                </div>
                <h3 class="sml-tit brief1">
                    <img src="/images/abc.png" alt="">
                    课程简介
                </h3>
                <p class="tim2">${description}</p>
                <h3 class="sml-tit brief2">
                    <img src="/images/zjr_btn.png" alt="">
                    主讲人简介
                </h3>
                <p class="tim2"> ${teacherDescription}</p>

                <h3 class="sml-tit brief3">
                    <img src="/images/sxsj_btn.png" alt="">
                    上线时间
                </h3>
                <p>${year}-${month}-${date}</p>
            </div>
        </div>
    </li>
</template>
<template id="math-template">
    <li class="all_uli">
        <div class="all_liplay shuxue_play">
            <!--data-article="videoDetail"-->
            <div class="all_aBtn a" data-id="${id}">
                <div class="leftJinDou"><span>${price}</span>金豆</div>
                <div class="yuwen_div1 shuxue_div1">数学</div>
                <div class="yuwen_div2 shuxue_div2" id="subjectImg">
                    <h3 class="yuwen_h3">${abstraction}</h3>
                    <p class="yuwen_p">${name}</p>
                </div>
                <p class="yuwen_p2">
                    <span>${grade}</span>
                    <span class="yuwen_span">${teacher}</span>
                    <span class="yuwen_riqi">${year}-${month}-${date}</span>
                </p>
                <span class="yuwen_a"></span>
            </div>
        </div>
        <div class="course-intro">
            <div class="course_xiaqing">
                <div class="xiaq_div">
                    <p>${outline}</p>
                    <div class="course_detail shuxue_Btn passed-detail" data-detail="${id}">详情
                        <img src="/images/xiala_sx.png" alt="">
                        <img src="/images/xiala_sqsx.png" alt="">
                    </div>
                </div>
            </div>
            <div class="course-detail" data-identity="${id}">
                <div class="keqian_zb">
                    课前准备：
                    <span>${prepare}</span>
                </div>
                <h3 class="sml-tit brief1">
                    <img src="/images/abc.png" alt="">
                    课程简介
                </h3>
                <p>${description}</p>
                <h3 class="sml-tit brief2">
                    <img src="/images/zjr_btn.png" alt="">
                    主讲人简介
                </h3>
                <p class="tim2"> ${teacherDescription}</p>

                <h3 class="sml-tit brief3">
                    <img src="/images/sxsj_btn.png" alt="">
                    上线时间
                </h3>
                <p>${year}-${month}-${date}</p>
            </div>
        </div>
    </li>
</template>
<template id="teacher-template">
    <li class="xiala_li" data-type="teacher">${teacher}<img src="../images/zbwq_zhong.png" alt=""></li>
</template>
<template id="grade-template">
    <li class="xiala_li" data-type="grade">${grade}<img src="../images/zbwq_zhong.png" alt=""></li>
</template>
<template id="date-template">
    <li class="xiala_li"></li>
</template>
<template id="selected-entries">
    <li class="jieG_li">
        <span id="Select">${selectedTxt}</span>
        <a href="javascript:void(0)">
            <img class="jieG_licha" src="../images/zhong_xiao.png" alt="">
        </a>
    </li>
</template>


<!--*****************************video*****************************-->
<template id="live-video-template">
    <div>
        <div class="live-details-videoPlay">
            <video src="${contentLink}" controls="controls" autoplay="autoplay"></video>
            <div class="live-details-label" id="bookMark"></div>
            <div class="live-details-videoTxt">${name}</div>
        </div>
        <div class="course-intro">
            <div class="course_xiaqing">
                <div class="course_dianzan">
                    <p class="course_xqpsee"><span>${readCount}</span>人观看过</p>
                    <a href="javascript:void(0)" class="course_xqpzan">
                        <img class="dianzanImg" id="icon" alt="">
                        赞
                        <span class="xqpZan">${likeCount}</span>
                    </a>
                </div>
            </div>
        </div>
    </div>
</template>
<template id="video-comment-template">
    <li class="liveDetails-li">
        <span class="liveDetails-name">${userName}</span>
        <span class="liveDetails-time">${createTime}</span>
        <p class="liveDetails-txt">${content}</p>
    </li>
</template>


<!--**********************************scheduler********************************-->
<template id="day-template">
    <tr class="color">
        <td style="width: 20%; border-right: 1px solid #ea875f;">星期${day}<br>(${date})</td>
        <td style="width: 80%;">
            <table style="width: 100%; height: 100%; border: none; border-spacing: 0; border-collapse: collapse;">
                <tbody data-ext-point="items" class="data"></tbody>
            </table>
        </td>
    </tr>
</template>
<template id="item-template">
    <tr>
        <td style="width: 28%;">${st}-${et}</td>
        <td style="width: 22%; border-top: none; border-bottom: none; border-left: 1px solid #ea875f; border-right: 1px solid #ea875f;">
            ${grade}
        </td>
        <td style="width: 50%;">${name}</td>
    </tr>
</template>

<!----------------------------------------------------------------- 弹窗开始 -->
<div id="container"></div>
<!-------------------------------------------------------------------------- 弹窗结束-->


<script src="/jquery/jquery-3.1.1.min.js"></script>
<script src="/bootstrap/bootstrap.min.js"></script>
<script src="/moment/moment.min.js"></script>
<script src="/util.js"></script>
<script src="/basic.js"></script>
<script src="../zu/zu.js"></script>
<!--<script src="/js/pikaday.js"></script>-->
<script>
    //[{..., teachers: [], grades: [], playings: [], futures: [], ...}, ...]
    var subjects = []

    //[{id: .., ..., liked: true, likeCount: 3, readCount: 8, comments: [{ sdfsa }, ...], ...}, ...]
    var passed = []

    var courseTable = [
        {day: '一', date: '', items: []},
        {day: '二', date: '', items: []},
        {day: '三', date: '', items: []},
        {day: '四', date: '', items: []},
        {day: '五', date: '', items: []}
    ]

    var params = null;

    var state = {
        currentArticle: document.getElementById('main'),
        getGrade: function (gradeValue) {
            var result = ''
            if (gradeValue == 1) {
                result = '一年级'
            } else if (gradeValue == 2) {
                result = '二年级'
            } else if (gradeValue == 3) {
                result = '三年级'
            } else if (gradeValue == 4) {
                result = '四年级'
            } else if (gradeValue == 5) {
                result = '五年级'
            } else if (gradeValue == 6) {
                result = '六年级'
            } else if (gradeValue == 20) {
                result = '低年级'
            } else {
                result = '高年级'
            }
            return result
        },
        switchTo: function (id) {
            state.currentArticle.style.display = 'none'
            state.currentArticle = document.getElementById(id)
            state.currentArticle.style.display = 'block'
            history.pushState(null, null, '/content/videos.html#' + id)
            state[id].init()
        },
        getSubjectById: function (subjectId) {
            var result = null
            for (var i = 0; i < subjects.length; ++i) {
                if (subjects[i].id == subjectId) {
                    result = subjects[i]
                    break
                }
            }
            return result
        },
//        containTeacher: function (subject, teacher) {
//            var result = false
//            for (var i = 0; i < subject.teachers.length; ++i) {
//                if (subject.teachers[i] == teacher) {
//                    result = true
//                    break
//                }
//            }
//            return result
//        },
//        containGrade: function (subject, grade) {
//            var result = false
//            for (var i = 0; i < subject.grades.length; ++i) {
//                if (subject.grades[i] == grade) {
//                    result = true
//                    break
//                }
//            }
//            return result
//        },
        init: function () {
//            var userId = g.getUrlParameter('userid')
//            g.setCookie('userId', userId)
//            g.setCookie('sessionId', '301dd50b5903de73ce0c25ee516307fd88eba65355fd02b62ab4ce7ec7e6847')
            var now = Date.now()
            $.ajax({
                type: 'get',
                url: '/api/subjects',
                success: function (ss) {
                    subjects = ss
                    for (var i = 0; i < subjects.length; ++i) {
                        subjects[i].playing = []
                        subjects[i].futures = []
                    }
                    $.ajax({
                        type: 'get',
                        url: '/api/schedulers',
                        success: function (vs) {
                            var monday = new Date(now)
                            var year = monday.getFullYear()
                            var month = monday.getMonth() + 1
                            var m = moment(now)
                            var week = m.week()
                            state.scheduler.week = week
                            var weekDay = m.day()
                            if (weekDay > 1) {
                                monday = new Date(now - (weekDay - 1) * 24 * 60 * 60 * 1000)
                            }
                            for (var i = 0; i < vs.length; ++i) {
                                var item = vs[i]
                                item.grade = state.getGrade(item.grade)
                                item.startTime = new Date(Date.parse(item.startTime.replace(/-/g, '/')))
                                item.endTime = new Date(Date.parse(item.endTime.replace(/-/g, '/')))
                                item.year = item.startTime.getFullYear()
                                item.month = item.startTime.getMonth() + 1
                                item.date = item.startTime.getDate()
                                item.hour = item.startTime.getHours()
                                item.minute = item.startTime.getMinutes()
                                if (item.minute == 0) {
                                    item.minute = '00'
                                }
                                item.endHour = item.endTime.getHours()
                                item.endMinute = item.endTime.getMinutes()
                                if (item.endMinute == 0) {
                                    item.endMinute = '00'
                                }
                                if (+item.endTime > now) {
                                    var s = state.getSubjectById(item.subjectId)
                                    if (+item.startTime > now) {
                                        s.futures.push(item)
                                    } else {
                                        s.playing.push(item)
                                    }
                                } else {
                                    passed.push(item)
                                }
                                if (item.year == year && item.week == week) {
                                    switch (item.day) {
                                        case 1:
                                            if (courseTable[0].date == '') {
                                                courseTable[0].date = year + '-' + month + '-' + monday.getDate()
                                            }
                                            courseTable[0].items.push(item)
                                            break
                                        case 2:
                                            if (courseTable[1].date == '') {
                                                var tuesday = new Date(+monday + 24 * 60 * 60 * 1000)
                                                courseTable[1].date = year + '-' + month + '-' + tuesday.getDate()
                                            }
                                            courseTable[1].items.push(item)
                                            break
                                        case 3:
                                            if (courseTable[2].date == '') {
                                                var wednesday = new Date(+monday + 2 * 24 * 60 * 60 * 1000)
                                                courseTable[2].date = year + '-' + month + '-' + wednesday.getDate()
                                            }
                                            courseTable[2].items.push(item)
                                            break
                                        case 4:
                                            if (courseTable[3].date == '') {
                                                var thursday = new Date(+monday + 3 * 24 * 60 * 60 * 1000)
                                                courseTable[3].date = year + '-' + month + '-' + thursday.getDate()
                                            }
                                            courseTable[3].items.push(item)
                                            break
                                        case 5:
                                            if (courseTable[4].date == '') {
                                                var friday = new Date(+monday + 4 * 24 * 60 * 60 * 1000)
                                                courseTable[4].date = year + '-' + month + '-' + friday.getDate()
                                            }
                                            courseTable[4].items.push(item)
                                            break
                                    }
                                }
                            }

                            state.switchTo('main')
                        }
                    })
                }
            })
            $.ajax({
                type: 'get',
                url: '/api/users/self',
                success: function (ss) {
                    params = ss
                    params.user = ss
                }
            })
            $.ajax({
                type: 'get',
                url: '/api/users/self/cards',
                success: function (ss) {
                    params.cards = ss
                }
            })

            $(document).on('click', '[data-article]', function (e) {
                var element = e.currentTarget;
                var id = element.dataset.article;
                if (element.dataset.id) {
                    state[id].id = element.dataset.id
                }
                state.switchTo(id)
            })

            window.addEventListener('hashchange', function (e) {
                var hashPos = e.newURL.indexOf('#')
                var hash = e.newURL.substring(hashPos + 1)
                state.switchTo(hash)
            }, false)
        },

        main: {
            zeroFuture: {
                container: document.getElementById('zeroFuture'),
                template: getTemplate('chinese-future-template'),
                data: null
            },
            zeroPlaying: {
                container: document.getElementById('zeroPlaying'),
                template: getTemplate('chinese-playing-template'),
                data: null
            },
            oneFuture: {
                container: document.getElementById('oneFuture'),
                template: getTemplate('math-future-template'),
                data: null
            },
            onePlaying: {
                container: document.getElementById('onePlaying'),
                template: getTemplate('math-playing-template'),
                data: null
            },
            isInit: false,
            init: function () {
                if (!state.main.isInit) {
                    $(document).on('click', '.detail', function (e) {
                        $('[data-identity="' + e.target.dataset.detail + '"]').toggle()
                        if ($(this).parent().parent().siblings(".course-detail").is(":visible")) {
                            $(this).children('img').eq(0).hide();
                            $(this).children('img').eq(1).show();
                        }
                        else {
                            $(this).children('img').eq(1).hide();
                            $(this).children('img').eq(0).show();
                        }
                    })

                    $(document).on('click', ".b", function (e) {
//                        alert(e.currentTarget.dataset.id);

                        params.objectType = "scheduler";
                        params.objectId = e.currentTarget.dataset.id;
                        params.showType = "liveVideo";
                        var t = _$_(params)
                        t.getContent(function (e) {
                            alert(JSON.stringify(e))
                            if (e.directLink!='') {
                                for (var i = 0; i < subjects.length; ++i) {
                                    for( var j=0; j<subjects[i].playing.length; ++j)
                                        subjects[i].playing[j].directLink = e.directLink
                                    document.getElementsByClassName("b").setAttribute("href",subjects[i].playing[j].directLink);
                                }
                            }
                        })
                       // xiao(e.currentTarget.dataset.id, "scheduler", "liveVideo")
                    });

                    state.main.zeroFuture.data = subjects[0].futures
                    state.main.zeroPlaying.data = subjects[0].playing
                    state.main.refreshState(0)
                    var Cc = document.getElementById('Cc')
                    Cc.innerHTML = subjects[0].playing.length + subjects[0].futures.length

                    state.main.oneFuture.data = subjects[1].futures
                    state.main.onePlaying.data = subjects[1].playing
                    state.main.refreshState(1)
                    var Mc = document.getElementById('Mc')
                    Mc.innerHTML = subjects[1].futures.length + subjects[1].playing.length

                    var whoFirst = function () {
                        var needFuture = true
                        var comparePlaying = function () {
                            var result = false
                            if ((subjects[0].playing.length > 0) && (subjects[1].playing.length > 0)) {
                                if (+subjects[0].playing[0].startTime > +subjects[1].playing[0].startTime) {
                                    result = true
                                }
                                needFuture = false
                            } else if (subjects[1].playing.length > 0) {
                                result = true
                                needFuture = false
                            } else if (subjects[0].playing.length > 0) {
                                needFuture = false
                            }
                            return result
                        }
                        var compareFuture = function () {
                            var result = false
                            if ((subjects[0].futures.length > 0) && (subjects[1].futures.length > 0)) {
                                if (+subjects[0].futures[0].startTime > +subjects[1].futures[0].startTime) {
                                    result = true
                                }
                            } else if (subjects[1].futures.length > 0) {
                                result = true
                            }
                            return result
                        }
                        var result = comparePlaying()
                        if (needFuture) {
                            result = compareFuture()
                        }
                        return result
                    }
                    if (whoFirst()) {
                        $('#mathOne').addClass('active')
                        $('#chineseZero').removeClass('active')
                        $('#one').addClass('active')
                        $('#zero').removeClass('active')
                    } else {
                        $('#chineseZero').addClass('active')
                        $('#mathOne').removeClass('active')
                        $('#zero').addClass('active')
                        $('#one').removeClass('active')
                    }

                    setInterval(function () {
                        state.main.refreshState(0)
                        state.main.refreshState(1)
                    }, 60 * 1000)

                    state.main.isInit = true
                }
            },
            refreshState: function (subjectIndex) {
                var now = new Date()
                for (var i = 0; i < subjects[subjectIndex].playing.length; ++i) {
                    var endTime = subjects[subjectIndex].playing[i].endTime
                    if (+endTime < +now) {
                        subjects[subjectIndex].playing.splice(i, 1)
                    }
                }
                for (var i = 0; i < subjects[subjectIndex].futures.length; ++i) {
                    var startTime = subjects[subjectIndex].futures[i].startTime
                    startTime = new Date(+startTime - 15 * 60 * 1000)
                    if (+startTime < +now) {
                        subjects[subjectIndex].playing.unshift(subjects[subjectIndex].futures[i])
                        subjects[subjectIndex].futures.splice(i, 1)
                    }
                }
                switch (subjectIndex) {
                    case 0:
                        state.main.zeroFuture.container.innerHTML = ''
                        proc(state.main.zeroFuture)
                        state.main.zeroPlaying.container.innerHTML = ''
                        proc(state.main.zeroPlaying)
                        break
                    case 1:
                        state.main.oneFuture.container.innerHTML = ''
                        proc(state.main.oneFuture)
                        state.main.onePlaying.container.innerHTML = ''
                        proc(state.main.onePlaying)
                        break
                    default:
                        break
                }
            },
            findById: function (id) {
                var result = null;
                for (var i = 0; i < subjects.length; ++i) {
                    for (var j = 0; j < subjects[i].futures.length; ++j) {
                        if (subjects[i].futures[j].id == id) {
                            result = subjects[i].futures[j]
                            break
                        }
                    }
                    if (result) {
                        break
                    }
                }
                return result
            },
            schedulerEntry: document.getElementById('schedulerEntry'),
            passedEntry: document.getElementById('passedEntry'),
            futureNoteEntry: document.getElementsByClassName('futureNoteEntry')
        },

        passed: {
            zeroPassed: {
                container: document.getElementById('video'),
                template: getTemplate('chinese-template'),
                data: passed
            },
            onePassed: {
                container: document.getElementById('video'),
                template: getTemplate('math-template'),
                data: passed
            },
            content: document.getElementById('video'),
            subject: document.getElementById('subject'),
            teacher: document.getElementById('teacher'),
            grade: document.getElementById('grade'),
            date: document.getElementById('date'),
            videoContainer: document.getElementById('video'),
            isInit: false,
            init: function () {
                if (!state.passed.isInit) {
                    var search = function (v) {
                        var result = []
                        for (var i = 0; i < passed.length; ++i) {
                            var isPassed = true
                            for (var p in v) {
                                if (v[p] != '全部') {
                                    switch (p) {
                                        case 'subject':
                                            if (isPassed && passed[i].subject != v[p]) {
                                                isPassed = false
                                            }
                                            break;
                                        case 'grade':
                                            if (isPassed && passed[i].grade != v[p]) {
                                                isPassed = false
                                            }
                                            break
                                        case 'teacher':
                                            if (isPassed && passed[i].teacher != v[p]) {
                                                isPassed = false
                                            }
                                            break
                                    }
                                }
                            }
                            if (isPassed) {
                                result.push(passed[i])
                            }
                        }

                        state.passed.videoContainer.innerHTML = ''
                        proc({
                            data: result,
                            container: state.passed.videoContainer,
                            templates: [
                                {type: 'chinese', templateId: 'chinese-template'},
                                {type: 'math', templateId: 'math-template'}
                            ]
                        })

                    }

                    $(document).on('click', '.passed-detail', function (e) {
                        $('[data-identity="' + e.target.dataset.detail + '"]').toggle()
                        if ($(this).parent().parent().siblings(".course-detail").is(":visible")) {
                            $(this).children('img').eq(0).hide();
                            $(this).children('img').eq(1).show();
                        }
                        else {
                            $(this).children('img').eq(1).hide();
                            $(this).children('img').eq(0).show();
                        }
                    })

                    $(document).on('click', ".tiaoj_span", function (e) {
                        if ($(e.currentTarget).hasClass('cur')) {
                            $(e.currentTarget).removeClass('cur');
                            $('.tan').hide();
                            $('.tan').css("z-index", "9999");
                            $(".xiala_ul").hide();
                            $(e.currentTarget).siblings(".xiala_ul").hide();
                        } else {
                            $(".tiaoj_span").removeClass('cur');
                            $(e.currentTarget).addClass('cur');
                            $('.tan').show();
                            $('.tan').css("z-index", "99");
                            $(".xiala_ul").hide();
                            $(e.currentTarget).siblings(".xiala_ul").show();
                        }
                    });

                    $(document).on('click', '.jieG_licha', function (e) {
                        var filter = document.getElementById('xuanzhong-entries')
                        var f = JSON.parse(filter.dataset.value)
                        delete f[e.target.dataset.type]
                        filter.dataset.value = JSON.stringify(f)
                        $(e.target.parentNode.parentNode).hide()
                        if (!f || (!f.subject && !f.teacher && !f.grade)) {
                            $('.tiaoj_jieG').attr("style", "display:none");
                            $("#video").attr("style", "padding-top:0rem");
                        }
                        search(f)
                    })

                    $(document).on('click', ".xiala_li", function (e) {
                        $(e.currentTarget).parents(".xiala_ul").find('.xiala_li').removeClass('cur');
                        $(e.currentTarget).addClass('cur');
                        $('.tan').hide();
                        $(e.currentTarget).parents(".xiala_ul").hide();
                        $(e.currentTarget).parents(".tiaoj_TJ").children('.tiaoj_span').removeClass('cur');
                        var $tuzhiTr = "<li class='jieG_li'><span>${value}</span><a href='javascript:void(0)'><img data-type='${type}' class='jieG_licha' src='../images/zhong_xiao.png' alt=''></a></li>";

                        var filter = document.getElementById('xuanzhong-entries')
                        filter.innerHTML = ''
                        var v = {}
                        if (filter.dataset.value && filter.dataset.value != '') {
                            v = JSON.parse(filter.dataset.value)
                        }
                        v[e.currentTarget.dataset.type] = $(e.currentTarget).text()
                        filter.dataset.value = JSON.stringify(v)
                        for (var prop in v) {
                            if (v[prop] != '全部') {
                                var e = $($tuzhiTr)[0]
                                bind(e, {value: v[prop], type: prop})
                                filter.appendChild(e)
                                $("#video").attr("style", "padding-top:3rem");
                            } else {
                                $(".tiaoj_jieG").attr("style", "display:none");
                                $("#video").attr("style", "padding-top:0rem");

                            }
                        }
                        filter.style.display = 'block'

                        search(v)

//                        $("#video").attr("style","padding-top:3rem");
                    });

                    $(document).on('click', ".a", function (e) {
//                        alert(e.target.dataset.id);
//                        xiao(e.target.dataset.id, "scheduler", "video")
                        params.objectType = "scheduler";
                        params.objectId = e.currentTarget.dataset.id;
                        params.showType = "video";
                        var t = _$_(params)
                        t.getContent(function (e) {
                            alert(JSON.stringify(e))
                            if (e.contentLink!='') {
                                for (var i = 0; i < passed.length; i++) {
                                    if (passed[i].id == params.objectId) {
                                        passed[i].contentLink = e.contentLink
                                        state.videoDetail.data=passed[i]
                                        state.switchTo('videoDetail')
                                        icon.addEventListener('click', function (e) {
                                            if (state.videoDetail.data.liked) {
                                                $.ajax({
                                                    type: "put",
                                                    url: '/api/schedulers/' + params.objectId + '/unlike',
                                                    data: JSON.stringify({}),
                                                    dataType: "json",
                                                    contentType: "application/json; charset=utf-8",
                                                    success: function (unlike) {
                                                        icon.setAttribute('src', '../images/dianzan.png');
                                                        state.videoDetail.data.likeCount--
                                                        e.target.nextElementSibling.textContent = state.videoDetail.data.likeCount
                                                        state.videoDetail.data.liked = false;
                                                    }
                                                })
                                            } else {
                                                $.ajax({
                                                    type: "put",
                                                    url: '/api/schedulers/' + params.objectId + '/like',
                                                    data: JSON.stringify({}),
                                                    dataType: "json",
                                                    contentType: "application/json; charset=utf-8",
                                                    success: function (like) {
                                                        icon.setAttribute('src', '../images/zanover.png');
                                                        ++state.videoDetail.data.likeCount;
                                                        e.target.nextElementSibling.textContent = state.videoDetail.data.likeCount
                                                        state.videoDetail.data.liked = true;
                                                    }
                                                })
                                            }
                                        }, false)

                                        //!*************************comments**************************
                                        var btn = document.getElementById('btn');
                                        btn.addEventListener('click', submit, false);
                                        function submit(e) {
                                            var textarea = document.getElementById('textarea');
                                            var value = textarea.value;
                                            if (value.length < 1) {
                                                return false;
                                            }
                                            textarea.value = '';
                                            e.target.style.color = '#f5f5f5';
                                            // e.target.style.backgroundColor = '#3e8f3e';
                                            $.ajax({
                                                type: "post",
                                                url: "/api/comments",
                                                data: JSON.stringify({
                                                    objectType: 'playback',
                                                    objectId: params.objectId,
                                                    content: value
                                                }),
                                                dataType: "json",
                                                contentType: "application/json; charset=utf-8",
                                                success: function (comment) {
                                                    state.videoDetail.data.comments.push(comment)
//                            location.reload();
                                                    var c = document.getElementById('comment-area')
                                                    c.innerHTML = ''
                                                    proc({
                                                        container: c,
                                                        data: state.videoDetail.data.comments,
                                                        templateId: 'video-comment-template'
                                                    })
                                                }
                                            })
                                        }
                                    }
                                }
                            }
                        })
                    });


                    for (var i = 0; i < passed.length; ++i) {
                        passed[i].type = 'chinese'
                        passed[i].subject = '语文'
                        if (passed[i].subjectId == 2) {
                            passed[i].type = 'math'
                            passed[i].subject = '数学'
                        }
                    }
//                    for (var i = 0; i < passed.length; ++i) {
//                        if (!passed[i].cdnLink || passed[i].cdnLink == '') {
//                            passed.splice(i, 1)
//                            --i
//                        }
//                    }
                    proc({
                        data: passed,
                        container: state.passed.videoContainer,
                        templates: [
                            {type: 'chinese', templateId: 'chinese-template'},
                            {type: 'math', templateId: 'math-template'}
                        ]
                    });
//********************************getTeacher*****************************
                    var getSomethings = function (type, subjectId, fieldName, postProcessor) {
                        $.ajax({
                            type: 'get',
                            url: '/api/schedulers/' + type + '?filter=' + encodeURIComponent(JSON.stringify({subjectId: subjectId})),
                            success: function (ts) {
                                var s = state.getSubjectById(subjectId)
                                s[fieldName] = ts
                                if (postProcessor) {
                                    postProcessor()
                                }
                            },
                            error: function (r) {
                                if (r.status == 404) {
                                    if (postProcessor) {
                                        postProcessor()
                                    }
                                }
                            }
                        })
                    }
                    getSomethings('teachers', subjects[0].id, 'teachers', function () {
                        getSomethings('teachers', subjects[1].id, 'teachers', function () {
                            var teachers = []
                            for (var i = 0; i < subjects[0].teachers.length; ++i) {
                                teachers.push({teacher: subjects[0].teachers[i]})
                            }
                            for (var i = 0; i < subjects[1].teachers.length; ++i) {
                                teachers.push({teacher: subjects[1].teachers[i]})
                            }
                            proc({
                                containerId: 'teacher',
                                data: teachers,
                                templateId: 'teacher-template'
                            })
                        });
                    })
// **********************************getGrade**************************
                    getSomethings('grades', subjects[0].id, 'grades', function () {
                        getSomethings('grades', subjects[1].id, 'grades', function () {
                            var grades = []
                            for (var i = 0; i < subjects[0].grades.length; ++i) {
                                subjects[0].grades[i] = state.getGrade(subjects[0].grades[i])
                                grades.push({grade: subjects[0].grades[i]})
                            }
                            for (var i = 0; i < subjects[1].grades.length; ++i) {
                                subjects[1].grades[i] = state.getGrade(subjects[1].grades[i])
                                grades.push({grade: subjects[1].grades[i]})
                            }
                            proc({
                                containerId: 'grade',
                                data: grades,
                                templateId: 'grade-template'
                            })
                        });
                    })

                    state.passed.isInit = true
                }
//                var picker = new Pikaday({
//                    field: document.getElementById('datePicker'),
//                    format: 'D MMM YYYY',
//                    onSelect: function () {
//                        console.log(this.getMoment().format('Do MMMM YYYY'));
//                    }
//                });


            },
            findById: function (id) {
                var result = null;
                for (var i = 0; i < passed.length; ++i) {
                    if (passed[i].id == id) {
                        result = passed[i]
                        break
                    }
                }
                return result
            }
        },

        futureNote: {
            init: function () {
                var t = state.main.findById(state.futureNote.id).year + '-' + state.main.findById(state.futureNote.id).month + '-' + state.main.findById(state.futureNote.id).date + ' ' + state.main.findById(state.futureNote.id).hour + ':' + state.main.findById(state.futureNote.id).minute + '开讲';
                var e = document.getElementsByClassName('waitTime')
                e[0].innerHTML = t
            }
        },

        videoDetail: {
            data: null,
            id: null,
            init: function () {
                //var data = state.passed.findById(state.videoDetail.id)
                var l = document.getElementById('live-details-video')
                l.innerHTML = ''
                proc({
                    container: l,
                    data: state.videoDetail.data,
                    templateId: 'live-video-template'
                })
                var bookMark = document.getElementById("bookMark")
                if (state.videoDetail.data.subjectId == 1) {
                    bookMark.innerHTML = '语文'
                } else if (state.videoDetail.data.subjectId == 2) {
                    bookMark.innerHTML = '数学'
                }


                var icon = document.getElementById('icon')
                if (state.videoDetail.data.liked) {
                    icon.setAttribute('src', '../images/zanover.png');
                } else {
                    icon.setAttribute('src', '../images/dianzan.png');
                }


                var c = document.getElementById('comment-area')
                c.innerHTML = ''
                proc({
                    containerId: 'comment-area',
                    data: state.videoDetail.data.comments,
                    templateId: 'video-comment-template'
                })
            }
        },

        scheduler: {
            isInit: false,
            init: function () {
                if (!state.scheduler.isInit) {
                    state.scheduler.year = state.scheduler.now.getFullYear()
                    var m = moment(state.scheduler.now)
                    state.scheduler.week = m.week()
                    state.scheduler.weekDay = m.day()
                    state.scheduler.weekElement.innerHTML = state.scheduler.week

                    $.ajax({
                        type: "get",
//                        url: '/api/schedulers/years/' + state.scheduler.year + '/weeks/' + state.scheduler.week,
                        url: '/api/schedulers/weeks/' + state.scheduler.week,
                        dataType: "json",
                        success: function (result) {
                            var course = result
                            var monday = state.scheduler.now
                            if (state.scheduler.weekDay > 1) {
                                monday = new Date(+state.scheduler.now - (state.scheduler.weekDay - 1) * 24 * 60 * 60 * 1000)
                            }
                            for (var i = 0; i < course.length; ++i) {
                                course[i].st = course[i].startTime.substr(11, 5)
                                course[i].et = course[i].endTime.substr(11, 5)
                                course[i].grade = state.getGrade(course[i].grade)
                                switch (course[i].day) {
                                    case 1:
                                        if (courseTable[0].date == '') {
                                            courseTable[0].date = monday.getFullYear() + '-' + (monday.getMonth() + 1) + '-' + monday.getDate()
                                        }
                                        courseTable[0].items.push(course[i])
                                        break
                                    case 2:
                                        if (courseTable[1].date == '') {
                                            var t = new Date(+monday + 24 * 60 * 60 * 1000)
                                            courseTable[1].date = t.getFullYear() + '-' + (t.getMonth() + 1) + '-' + t.getDate()
                                        }
                                        courseTable[1].items.push(course[i])
                                        break
                                    case 3:
                                        if (courseTable[2].date == '') {
                                            var t = new Date(+monday + 2 * 24 * 60 * 60 * 1000)
                                            courseTable[2].date = t.getFullYear() + '-' + (t.getMonth() + 1) + '-' + t.getDate()
                                        }
                                        courseTable[2].items.push(course[i])
                                        break
                                    case 4:
                                        if (courseTable[3].date == '') {
                                            var t = new Date(+monday + 3 * 24 * 60 * 60 * 1000)
                                            courseTable[3].date = t.getFullYear() + '-' + (t.getMonth() + 1) + '-' + t.getDate()
                                        }
                                        courseTable[3].items.push(course[i])
                                        break
                                    case 5:
                                        if (courseTable[4].date == '') {
                                            var t = new Date(+monday + 4 * 24 * 60 * 60 * 1000)
                                            courseTable[4].date = t.getFullYear() + '-' + (t.getMonth() + 1) + '-' + t.getDate()
                                        }
                                        courseTable[4].items.push(course[i])
                                        break
                                }
                            }
                            proc({
                                containerId: 'day',
                                data: courseTable,
                                templateId: 'day-template',
                                next: {
//                                    dataSelector: 'items',
//                                    dataFieldName: 'items',
                                    templateId: 'item-template'
                                }
                            })
                        }
                    })

                    state.scheduler.isInit = true
                }
            },
            now: new Date(),
            year: null,
            week: null,
            weekDay: null,
            weekElement: document.getElementById("week")
        }
    }

    state.init()
</script>
</body>
</html>