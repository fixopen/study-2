<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Menu Settings</title>
</head>

<script type="text/javascript" src="../jquery/jquery.min.js"></script>
<body>
<ol>
    <li>公告</li>
    <li>
        学习
        <ol>
            <li>直播课</li>
            <li>语文</li>
            <li>数学</li>
            <li>英语</li>
        </ol>
    </li>
    <li data-id="user">我的</li>
</ol>
<input type="text" id="content"/>
<input type="button" id="save" value="save"/>
<script>
    let menus = {
        "button": [
            {
                "type": "view",
                "name": "直播",
                "url": "https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx60171bc59d149903&redirect_uri=http%3A%2F%2Fwww.xiaoyuschool.com%2Fapi%2Fpublic-account%2Fvideo&response_type=code&scope=snsapi_userinfo&state=test#wechat_redirect",
            },
            {
                "name": "学习",
                "sub_button": [
                    {
                        "type": "view",
                        "name": "公告",
                        "url": "http://mp.weixin.qq.com/s?__biz=MzI3NzQwNTY0NA==&mid=2247483909&idx=1&sn=44f1b0d808e7df914dbea1070b78c5cb&chksm=eb6788a6dc1001b0bae006df1c15e099500a32a774971f5b14ffe518c96621b08c36f184dedb#rd"
                    },
                    {
                        "type": "view",
                        "name": "语文",
                        "url": "https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx60171bc59d149903&redirect_uri=http%3A%2F%2Fwww.xiaoyuschool.com%2Fapi%2Fpublic-account%2Fchinese&response_type=code&scope=snsapi_userinfo&state=test#wechat_redirect"
                    },
                    {
                        "type": "view",
                        "name": "数学",
                        "url": "https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx60171bc59d149903&redirect_uri=http%3A%2F%2Fwww.xiaoyuschool.com%2Fapi%2Fpublic-account%2Fmath&response_type=code&scope=snsapi_userinfo&state=test#wechat_redirect"
                    }
                ]
            },
            {
                "type": "view",
                "name": "我的",
                "url": "https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx60171bc59d149903&redirect_uri=http%3A%2F%2Fwww.xiaoyuschool.com%2Fapi%2Fpublic-account%2Fuser&response_type=code&scope=snsapi_userinfo&state=test#wechat_redirect"
            }
        ]
    }

   // let currentMenu;
    let save = document.getElementById('save')
    save.addEventListener('click', function (e) {
        $.ajax({
            url: "/api/public-account/custom-menu",
            type: 'post',
            data: JSON.stringify(menus),
            dataType: 'json',
            contentType: "application/json",
            async: true,
            success: function (r) {
                alert('success')
            },
            error: function (r) {
                alert('error')
            }
        })
    })
</script>
</body>
</html>
